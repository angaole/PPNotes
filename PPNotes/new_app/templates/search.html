<!DOCTYPE html>
<html lang="en">
<head>
    <title>Search</title>
    {% load  static %}
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="{%static "css/bootstrap.min.css"%}" rel="stylesheet">
    <link href="{%static "css/style.css"%}" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script type="text/javascript" src="{%static "js/jquery.min.js"%}"></script>
    <link href="{%static "/css/font-awesome.min.css"%}" rel="stylesheet" type="text/css">
    <link href="{%static "css/bootstrap.css"%}" rel="stylesheet" type="text/css">
    <script type="text/javascript" language="javascript">
        var currentSelIndex = -1;
        var oldSelIndex = -1;

        function selectItem(keyword, event) {
            if (keyword == "") {
                document.getElementById("ulItems").style.display = "none";
                return;
            }
            else {
                var liLength = document.getElementById("ulItems").getElementsByTagName("li").length; //获取列表数量
                if ((event.keyCode == 38 || event.keyCode == 40) && document.getElementById("ulItems").style.display != "none") {
                    if (liLength > 0) {
                        oldSelIndex = currentSelIndex;
                        //上移
                        if (event.keyCode == 38) {
                            if (currentSelIndex == -1) {
                                currentSelIndex = liLength - 1;
                            }
                            else {
                                currentSelIndex = currentSelIndex - 1;
                                if (currentSelIndex < 0) {
                                    currentSelIndex = liLength - 1;
                                }
                            }
                            if (currentSelIndex != -1) {
                                document.getElementById("li_" + currentSelIndex).style.backgroundColor = "#cbf3fd";
                                document.getElementById("txtKeyword").value = document.getElementById("li_" + currentSelIndex).innerText;
                            }
                            if (oldSelIndex != -1) {
                                document.getElementById("li_" + oldSelIndex).style.backgroundColor = "#ffffff";
                            }
                        }
                        //下移
                        if (event.keyCode == 40) {
                            if (currentSelIndex == liLength - 1) {
                                currentSelIndex = 0;
                            }
                            else {
                                currentSelIndex = currentSelIndex + 1;
                                if (currentSelIndex > liLength - 1) {
                                    currentSelIndex = 0;
                                }
                            }
                            if (currentSelIndex != -1) {
                                document.getElementById("li_" + currentSelIndex).style.backgroundColor = "#cbf3fd";
                                document.getElementById("txtKeyword").value = document.getElementById("li_" + currentSelIndex).innerText;
                            }
                            if (oldSelIndex != -1) {
                                document.getElementById("li_" + oldSelIndex).style.backgroundColor = "#ffffff";
                            }
                        }
                    }
                }
                else if (event.keyCode == 13) {
                    if (document.getElementById("ulItems").style.display != "none" && liLength > 0 && currentSelIndex != -1) {
                        document.getElementById("txtKeyword").value = document.getElementById("li_" + currentSelIndex).innerText;
                        document.getElementById("ulItems").style.display = "none";
                        currentSelIndex = -1;
                        oldSelIndex = -1;
                    }
                }
                else {
                    autoComplete(keyword);
                    document.getElementById("ulItems").style.display = "";
                    currentSelIndex = -1;
                    oldSelIndex = -1;
                }
            }
        }

        function autoComplete(keyword) {
            var myArray = new Array("Acute Myeloid Leukemia", "Clear Cell Sarcoma of the Kidney", "Neuroblastoma", "Osteosarcoma", "Rhabdoid Tumor", "High-Risk Wilms Tumor", "Adrenocortical Carcinoma", "Bladder Urothelial Carcinoma", "Breast Invasive Carcinoma", "Cervical Squamous Cell Carcinoma and Endocervical Adenocarcinoma", "Cholangiocarcinoma", "Colon Adenocarcinoma", "Lymphoid Neoplasm Diffuse Large B-cell Lymphoma", "Esophageal Carcinoma", "Glioblastoma Multiforme", "Head and Neck Squamous Cell Carcinoma", "Kidney Chromophobe", "Kidney Renal Clear Cell Carcinoma", "Kidney Renal Papillary Cell Carcinoma", "Acute Myeloid Leukemia", "Brain Lower Grade Glioma", "Liver Hepatocellular Carcinoma", "Lung Adenocarcinoma", "Lung Squamous Cell Carcinoma", "Mesothelioma", "Ovarian Serous Cystadenocarcinoma", "Pancreatic Adenocarcinoma", "Pheochromocytoma and Paraganglioma", "Prostate Adenocarcinoma", "Rectum Adenocarcinoma", "Sarcoma", "Skin Cutaneous Melanoma", "Stomach Adenocarcinoma", "Testicular Germ Cell Tumors", "Thyroid Carcinoma", "Thymoma", "Uterine Corpus Endometrial Carcinoma", "Uterine Carcinosarcoma", "Uveal Melanoma")
            if (keyword==""){
                document.getElementById("ulItems").innerHTML = "";
            }
            else {
                var number = 0;
                var str = "";
                for (var i=0;i<myArray.length;i++){
                    var index = myArray[i].indexOf(keyword);
                    if (index!=-1){
                        var strs = "<li id=\"li_"+number.toString()+"\">"+myArray[i]+"</li>";
                        str += strs;
                        number += 1;
                    }
                }
                document.getElementById("ulItems").innerHTML = str;
            }
        }
    </script>
</head>
<body>
  <div class="navbar navbar-default navbar-inverse navbar-static-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-ex-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand"><span>Lnc2Catlas</span></a>
        </div>
        <div class="collapse navbar-collapse" id="navbar-ex-collapse">
          <ul class="nav navbar-nav navbar-right ">
            <li>
              <a href="/home/">Home</a>
            </li>
            <li>
              <a href="/browse/1/20/">Browse</a>
            </li>
            <li class="active ">
              <a href="/search/">Search</a>
            </li>
            <li>
              <a href="/download/">Download</a>
            </li>
            <li>
              <a href="/help/">Help</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
     <div class="section">
      <div class="container">
        <div class="row">
          <div class="col-md-12">
            <h1 class="text-center">Search
              <br>
            </h1>
          </div>
        </div>
    </div>
</div>
<div class="section">
    <div class="container">
        <div class="row">
            <div class="col-md-4">
                <select style="font-size:20px;", id="mysel">
                    <option value="1">lncrna</option>
                    <option value="2">SNP</option>
                    <option value="3">disease</option>
                </select>
                </div>
                <script type="text/javascript">
                function setaction(){
                    var myselect = document.getElementById('mysel');
                    var index = myselect.selectedIndex;
                    var val = myselect.options[index].value;
                    var conten = form1.content.value;
                    if(conten=="")
                    {
                        alert("Please input what you want to search")
                    }
                    else
                     {if(val=="1"){
                         //document.getElementByName("fuck").value="1";
                         var tem = "/searchby/1/"+String(conten)+"/";
                         //alert(tem);
                         document.form1.action=tem;
                     }
                     if(val=="2"){
                         //document.getElementByName("fuck").value="2";
                         var tem = "/searchby/2/"+String(conten)+"/";
                         document.form1.action=tem;
                     }
                     if(val=="3"){
                         //document.getElementByName("fuck").value="3";
                         var tem = "/searchby/3/"+String(conten)+"/";
                         document.form1.action=tem;
                     }
                    form1.submit();}
                }
                </script>
          <div class=" col-md-6">
            <form role="form" action="" method="post" name="form1">
              <div class="form-group">
                <div class="input-group">
                  <input id="txtKeyword" type="text" class="form-control" name="content" onkeyup="selectItem(this.value, event)" style="position:absolute; width:500px;">
                  <ul id="ulItems" style="list-style-type:none;display: none; border:1px solid #cecece; border-top:none; "></ul>
                  <span class="input-group-btn">
                    <button class="btn btn-success" type="submit" onclick="setaction()" style="position:absolute; left:500px; top:0px;">Search</a>
                  </span>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
    <div class="section">
      <div class="container">
        <div class="row">
            <div class="col-md-3"></div>
          <div class="col-md-6">
            <p><font size=4>
                Please input the name of a long non-conding RNA or a disease.</font>
                <br> <font size=4>Such as "ENST00000417324.1" or "Neuroblastoma".</font>
            </p>
          </div>
          <div class="col-md-3"></div>
        </div>
      </div>
    </div>
</body>
</html>
